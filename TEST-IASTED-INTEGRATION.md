# üß™ Guide de Test - Int√©gration iAsted dans Dashboard Admin

Ce guide vous permet de **tester imm√©diatement** l'int√©gration compl√®te de iAsted dans Ndjobi.

---

## ‚úÖ V√©rification Pr√©alable

### 1. Fichiers Cr√©√©s

```bash
cd /Users/okatech/ndjobi

# V√©rifier frontend
ls -la src/components/admin/IAsted*
ls -la src/components/iasted/
ls -la src/services/iasted/
ls -la src/hooks/iasted/

# V√©rifier backend
ls -la iasted/backend/app/
ls -la iasted/backend/docker-compose.yml
```

**R√©sultat attendu** : Tous les fichiers existent ‚úÖ

### 2. Variables d'Environnement

```bash
# V√©rifier .env.local frontend
cat .env.local | grep IASTED
```

**R√©sultat attendu** :
```
VITE_IASTED_API_URL=http://localhost:8000/api/v1
VITE_IASTED_WS_URL=ws://localhost:8000/api/v1
```

### 3. Int√©gration Dashboard Admin

```bash
# V√©rifier que AdminDashboard importe iAsted
grep -n "IAsted" src/pages/dashboards/AdminDashboard.tsx
```

**R√©sultat attendu** :
```
26:import { IAstedChat } from '@/components/admin/IAstedChat';
27:import { IAstedFloatingButton } from '@/components/admin/IAstedFloatingButton';
812-818: Onglet iAsted dans TabsList
855: {activeView === 'iasted' && <IAstedChat isOpen={true} />}
858: {activeView !== 'iasted' && <IAstedFloatingButton />}
```

---

## üöÄ Lancement des Services

### √âtape 1 : Backend iAsted (Terminal 1)

```bash
cd /Users/okatech/ndjobi/iasted/backend

# V√©rifier que le fichier env.template existe
ls -la env.template

# Copier vers .env
cp env.template .env

# Configurer au minimum la cl√© Google AI (GRATUIT)
# √âditer .env et remplacer :
# GOOGLE_AI_API_KEY=AIzaSy...votre_cle_ici

# Obtenir cl√© gratuite :
open https://makersuite.google.com/app/apikey

# Une fois la cl√© ajout√©e, lancer Docker
docker-compose up -d

# Attendre 30 secondes que tous les services d√©marrent
sleep 30

# V√©rifier les logs
docker-compose logs api

# Devrait afficher :
# ‚úÖ Service STT Deepgram initialis√©
# ‚úÖ LLM Router initialis√©
# ‚úÖ Client Redis initialis√©
# üöÄ D√©marrage de iAsted v1
```

### √âtape 2 : V√©rifier Backend (Terminal 2)

```bash
# Health check
curl http://localhost:8000/health

# Devrait retourner :
# {"status":"healthy","service":"iAsted","version":"v1","environment":"development"}

# V√©rifier documentation API
curl http://localhost:8000/api/v1/docs

# OU ouvrir dans navigateur
open http://localhost:8000/api/v1/docs
```

### √âtape 3 : Frontend Ndjobi (Terminal 3)

```bash
cd /Users/okatech/ndjobi

# V√©rifier les variables d'env
cat .env.local | grep IASTED

# Lancer le dev server
npm run dev

# Devrait afficher :
# VITE v5.x.x  ready in xxx ms
# ‚ûú  Local:   http://localhost:5173/
```

---

## üé¨ Sc√©nario de Test Complet

### Test 1 : Connexion Dashboard Admin

1. **Ouvrir navigateur** : http://localhost:5173

2. **Se connecter en mode Admin** :
   - Email : `iasted@me.com`
   - Password : `011282`

3. **Redirection automatique** vers `/dashboard/admin`

4. **V√©rifier l'affichage** :
   - En-t√™te "Protocole d'√âtat" visible
   - Navigation avec onglets : Dashboard, Validation, Enqu√™tes, Sous-Admins, Rapports, XR-7, **iAsted IA**

### Test 2 : Acc√®s Onglet iAsted

1. **Cliquer sur l'onglet** : **"iAsted IA"** (avec ic√¥ne üß† Brain)

2. **Page iAsted s'affiche** avec :
   - En-t√™te violet/bleu "Assistant Vocal iAsted"
   - Badge "Multi-LLM"
   - Panneau de contr√¥le (gauche)
   - Historique conversations (droite)
   - Bouton "Activer iAsted"

3. **Cliquer** sur "Activer iAsted"

4. **Observer** :
   - Toast notification : "‚úÖ iAsted activ√©"
   - Badge "Connect√©" appara√Æt (vert)
   - Gros bouton micro rond appara√Æt (violet/bleu)
   - Statut : "‚úÖ Pr√™t √† vous √©couter"

### Test 3 : Premi√®re Interaction Vocale

1. **Cliquer sur le bouton micro** (rond, violet/bleu)

2. **Popup navigateur** : "Autoriser l'acc√®s au microphone ?"
   - Cliquer **"Autoriser"**

3. **Bouton devient ROUGE** et pulse ‚Üí Enregistrement actif

4. **Parler clairement** :
   ```
   "Bonjour iAsted, pr√©sente-toi"
   ```

5. **Observer le flow** :
   - Transcription appara√Æt en temps r√©el sous le bouton : "Bonjour iAsted..."
   - Bouton devient **ORANGE** : "‚è≥ Traitement..."
   - Console navigateur (F12) affiche :
     ```
     üé§ Transcription finale: Bonjour iAsted, pr√©sente-toi (conf=0.95)
     ü§ñ R√©ponse LLM (gemini-flash): Bonjour ! Je suis iAsted...
     ```
   - Historique se met √† jour avec l'√©change
   - **Audio joue** avec la r√©ponse vocale

6. **Historique** :
   - Carte appara√Æt √† droite
   - Affiche : Vous ‚Üí "Bonjour iAsted..." / iAsted ‚Üí "Bonjour ! Je suis..."
   - Badge du provider (Gemini / GPT-4o / Claude)

### Test 4 : Bouton Flottant

1. **Retourner sur onglet** "Dashboard Global"

2. **Regarder en bas √† droite** :
   - Bouton flottant violet/bleu avec ic√¥ne ü§ñ visible
   - Point vert qui pulse (indicateur actif)

3. **Cliquer sur le bouton flottant**

4. **Dialog modale s'ouvre** :
   - M√™me interface iAsted compl√®te
   - Peut d√©marrer session et parler

5. **Fermer la modale** :
   - Cliquer en dehors OU bouton X
   - Bouton flottant reste visible

### Test 5 : Commande Complexe

Tester le routing intelligent :

1. **Activer iAsted** (si pas d√©j√† fait)

2. **Parler** :
   ```
   "G√©n√®re-moi un rapport PDF sur les 10 derniers cas critiques avec analyse d√©taill√©e et recommandations"
   ```

3. **Observer** :
   - Transcription longue appara√Æt
   - Status "‚è≥ Traitement..." (peut prendre 3-5 secondes)
   - Console backend affiche : `ü§ñ Routing vers claude-haiku` (requ√™te complexe)
   - R√©ponse d√©taill√©e dans l'historique
   - Badge "Claude" s'affiche

4. **Deuxi√®me requ√™te simple** :
   ```
   "Merci, donne-moi le nombre total de signalements"
   ```

5. **Observer** :
   - Status traitement plus rapide (<1s)
   - Console backend : `ü§ñ Routing vers gemini-flash` (requ√™te simple)
   - Badge "Gemini" s'affiche

---

## üìä Logs √† Surveiller

### Console Navigateur (F12)

**Lors de la connexion** :
```
‚úÖ WebSocket iAsted connect√©
Session ID: abc123-...
```

**Lors d'une requ√™te vocale** :
```
üé§ Envoi audio chunk: 8192 bytes
üìù Transcription: "Bonjour iAsted..."
ü§ñ R√©ponse LLM: "Bonjour ! Je suis..."
üîä Audio re√ßu: 45320 bytes
```

### Logs Backend Docker

```bash
# Voir les logs en temps r√©el
cd /Users/okatech/ndjobi/iasted/backend
docker-compose logs -f api
```

**Logs attendus** :
```
iasted-api  | üöÄ D√©marrage de iAsted v1
iasted-api  | üìç Environnement: development
iasted-api  | ‚úÖ Service STT Deepgram initialis√©
iasted-api  | ‚úÖ LLM Router initialis√©
iasted-api  | ‚úÖ Client Redis initialis√©
iasted-api  | INFO:     Application startup complete
iasted-api  | INFO:     Uvicorn running on http://0.0.0.0:8000
```

**Lors d'une requ√™te** :
```
iasted-api  | ‚úÖ WebSocket connect√©: session=abc123, user=user456
iasted-api  | üé§ Transcription finale: Bonjour iAsted... (conf=0.95)
iasted-api  | ü§ñ Routing vers gemini-flash pour: Bonjour iAsted...
iasted-api  | ‚úÖ R√©ponse LLM (gemini-flash): Bonjour ! Je suis iAsted...
iasted-api  | üîä Audio synth√©tis√©: 45320 bytes
```

---

## üîç V√©rifications Techniques

### Test API REST

```bash
# Cr√©er une session vocale (avec un vrai token Supabase)
curl -X POST http://localhost:8000/api/v1/voice/sessions \
  -H "Authorization: Bearer eyJhbGc..." \
  -H "Content-Type: application/json"

# Devrait retourner :
# {
#   "session_id": "uuid-...",
#   "ws_url": "/api/v1/voice/ws/uuid-...",
#   "expires_in": 1800
# }
```

### Test WebSocket (depuis console navigateur)

```javascript
// Ouvrir console (F12) sur http://localhost:5173/dashboard/admin
// Copier-coller ce code :

const token = localStorage.getItem('sb-xfxqwlbqysiezqdpeqpv-auth-token');
const parsedToken = JSON.parse(token);
const accessToken = parsedToken.access_token;

const ws = new WebSocket(`ws://localhost:8000/api/v1/voice/ws/test-session?token=${accessToken}`);

ws.onopen = () => console.log('‚úÖ WebSocket connect√©');
ws.onmessage = (e) => console.log('üì® Message:', e.data);
ws.onerror = (e) => console.error('‚ùå Erreur:', e);
```

### Test Services Docker

```bash
# V√©rifier que tous les services sont UP
docker-compose ps

# Devrait afficher :
# iasted-api       running
# iasted-postgres  running  (healthy)
# iasted-redis     running  (healthy)
# iasted-rabbitmq  running  (healthy)
# iasted-celery    running
# iasted-prometheus running
# iasted-grafana   running
```

---

## üí∞ Test avec Cl√©s API Minimales

Pour tester **SANS d√©penser**, utilisez uniquement Google AI (gratuit) :

### Configuration Minimaliste

Dans `/Users/okatech/ndjobi/iasted/backend/.env` :

```bash
# OBLIGATOIRE - Gratuit
GOOGLE_AI_API_KEY=AIzaSy...votre_cle_ici
GEMINI_MODEL=gemini-2.0-flash-exp

# Les autres peuvent rester vides pour les tests
DEEPGRAM_API_KEY=VOTRE_CLE_DEEPGRAM_ICI
OPENAI_API_KEY=VOTRE_CLE_OPENAI_ICI
ANTHROPIC_API_KEY=VOTRE_CLE_ANTHROPIC_ICI
```

**Avec juste Google AI** :
- ‚úÖ LLM Router fonctionnera (100% Gemini)
- ‚ùå STT Deepgram non fonctionnel (mais interface fonctionne)
- ‚ùå TTS Google Cloud non fonctionnel (texte seul)

**Pour test complet vocal**, ajouter aussi :
- Deepgram (200$ gratuits) : https://console.deepgram.com
- Google Cloud TTS service account JSON

---

## üéØ Checklist de Test

### Phase 1 : Infrastructure

- [ ] Backend d√©marr√© : `docker-compose ps` montre 7 services UP
- [ ] API accessible : `curl http://localhost:8000/health` retourne "healthy"
- [ ] Frontend d√©marr√© : `npm run dev` fonctionne
- [ ] Variables env : `.env.local` contient `VITE_IASTED_API_URL`

### Phase 2 : Interface Admin

- [ ] Connexion admin r√©ussie : http://localhost:5173/auth
- [ ] Dashboard admin accessible : http://localhost:5173/dashboard/admin
- [ ] Onglet "iAsted IA" visible dans la navigation
- [ ] Clic sur onglet affiche l'interface iAsted

### Phase 3 : Bouton Flottant

- [ ] Sur onglet "Dashboard Global", bouton violet/bleu visible en bas √† droite
- [ ] Clic sur bouton flottant ouvre dialog modale
- [ ] Interface iAsted compl√®te dans la modale
- [ ] Fermeture modale fonctionne

### Phase 4 : Session Vocale

- [ ] Bouton "Activer iAsted" fonctionne
- [ ] Badge "Connect√©" (vert) appara√Æt
- [ ] Gros bouton micro rond visible
- [ ] Console navigateur : "‚úÖ WebSocket iAsted connect√©"
- [ ] Console backend : "‚úÖ WebSocket connect√©: session=..."

### Phase 5 : Interaction Vocale

- [ ] Clic sur micro ‚Üí Autorisation microphone accord√©e
- [ ] Bouton devient rouge et pulse
- [ ] Parler "Bonjour" ‚Üí Transcription appara√Æt
- [ ] Status "‚è≥ Traitement..." s'affiche
- [ ] R√©ponse texte dans historique
- [ ] Audio joue (si TTS configur√©)
- [ ] Historique mis √† jour avec l'√©change
- [ ] Badge provider affich√© (Gemini / GPT-4o / Claude)

### Phase 6 : Monitoring

- [ ] Grafana accessible : http://localhost:3001 (admin/admin)
- [ ] Prometheus accessible : http://localhost:9090
- [ ] M√©triques visibles dans Grafana
- [ ] Logs backend en temps r√©el : `docker-compose logs -f api`

---

## üì∏ Captures d'√âcran Attendues

### 1. Dashboard Admin - Onglet iAsted

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Protocole d'√âtat                        Admin  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Dashboard] [Validation] [Enqu√™tes]             ‚îÇ
‚îÇ [Sous-Admins] [Rapports] [XR-7] [iAsted IA]‚Üêüß† ‚îÇ ‚Üê Actif
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  ü§ñ Assistant Vocal iAsted  [Multi-LLM] ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  Votre assistant intelligent...          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Contr√¥les   ‚îÇ  ‚îÇ Historique (0)   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   ü§ñ        ‚îÇ  ‚îÇ Aucune conv...   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ D√©marrer    ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ une session ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ [Activer]   ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  Capacit√©s : [STT] [Multi-LLM] [TTS]            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2. Session Active avec Micro

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Contr√¥les                                       ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ              ‚îÇ          ‚îÇ                       ‚îÇ
‚îÇ              ‚îÇ    üé§    ‚îÇ  ‚Üê Gros bouton violet ‚îÇ
‚îÇ              ‚îÇ          ‚îÇ                       ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ       ‚úÖ Pr√™t √† vous √©couter                    ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  [Terminer la session] [üîä Audio activ√©]       ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÇ
‚îÇ  R√¥le : admin                                   ‚îÇ
‚îÇ  √âchanges : 0                                   ‚îÇ
‚îÇ  Statut : ‚óè Connect√©                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3. Pendant l'Enregistrement

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ              ‚îÇ          ‚îÇ                       ‚îÇ
‚îÇ              ‚îÇ   üîá     ‚îÇ  ‚Üê Rouge + pulse      ‚îÇ
‚îÇ              ‚îÇ          ‚îÇ                       ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ       üî¥ Enregistrement en cours...             ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Transcription :                         ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ "Bonjour iAsted, pr√©sente-toi"         ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4. Apr√®s R√©ponse

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Historique de conversation               (1)  ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  üë§ Vous                          10:30:45      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Bonjour iAsted, pr√©sente-toi          ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                  ‚îÇ
‚îÇ  ü§ñ iAsted                        10:30:47      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ Bonjour ! Je suis iAsted, votre        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ assistant vocal intelligent pour la    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ plateforme Ndjobi. Je peux vous aider  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ avec vos t√¢ches administratives...     ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                  ‚Ä¢ Gemini      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üêõ R√©solution de Probl√®mes

### Erreur : "Module not found: iastedApiClient"

**Cause** : TypeScript n'a pas recompil√©

**Solution** :
```bash
# Arr√™ter npm run dev (Ctrl+C)
# Relancer
npm run dev
```

### Erreur : "Connection refused localhost:8000"

**Cause** : Backend pas d√©marr√©

**Solution** :
```bash
cd /Users/okatech/ndjobi/iasted/backend
docker-compose up -d
docker-compose ps  # V√©rifier que api est UP
```

### Erreur : "Microphone access denied"

**Cause** : Permissions navigateur

**Solutions** :
- **Chrome** : chrome://settings/content/microphone ‚Üí Autoriser localhost
- **Firefox** : Pr√©f√©rences ‚Üí Vie priv√©e ‚Üí Permissions ‚Üí Microphone
- **Safari** : Pr√©f√©rences ‚Üí Sites web ‚Üí Microphone

### Erreur : "Token invalid"

**Cause** : Session expir√©e

**Solution** : Se reconnecter au dashboard

### Pas d'audio en retour

**V√©rifications** :
```bash
# 1. Volume syst√®me
# 2. Console navigateur pour erreurs
# 3. Backend configur√© avec Google TTS
grep GOOGLE_APPLICATION_CREDENTIALS /Users/okatech/ndjobi/iasted/backend/.env
```

---

## üìà M√©triques de Performance

Une fois test√©, v√©rifier les m√©triques :

```bash
# Prometheus
open http://localhost:9090

# Requ√™tes utiles
websocket_connections  # Devrait √™tre = 1
llm_requests_total     # Incr√©mente √† chaque requ√™te
cache_hits_total       # Augmente avec requ√™tes similaires
```

---

## ‚úÖ Confirmation de Succ√®s

**Si tous ces points sont verts, l'int√©gration est PARFAITE** :

- ‚úÖ Backend iAsted accessible sur :8000
- ‚úÖ Frontend Ndjobi accessible sur :5173
- ‚úÖ Dashboard admin affiche onglet "iAsted IA"
- ‚úÖ Clic sur onglet affiche interface iAsted
- ‚úÖ Bouton "Activer iAsted" fonctionne
- ‚úÖ WebSocket se connecte (logs console)
- ‚úÖ Micro enregistre et envoie audio
- ‚úÖ Transcription appara√Æt en temps r√©el
- ‚úÖ LLM g√©n√®re r√©ponse (visible dans historique)
- ‚úÖ Audio joue (si TTS configur√©)
- ‚úÖ Bouton flottant fonctionne sur autres onglets
- ‚úÖ Routing LLM intelligent (Gemini/GPT/Claude)
- ‚úÖ Cache s√©mantique actif (√©conomie tokens)

---

## üéä Prochaines Actions

### Imm√©diat (Aujourd'hui)

```bash
# 1. Obtenir cl√© Google AI gratuite (2 min)
open https://makersuite.google.com/app/apikey

# 2. Ajouter dans .env
cd /Users/okatech/ndjobi/iasted/backend
nano .env
# Ligne : GOOGLE_AI_API_KEY=AIzaSy...

# 3. Lancer le stack
docker-compose up -d

# 4. Tester
cd /Users/okatech/ndjobi
npm run dev
open http://localhost:5173/dashboard/admin
```

### Cette Semaine

- [ ] Obtenir cl√©s Deepgram + OpenAI + Anthropic (cr√©dits gratuits)
- [ ] Tester vocal complet (STT ‚Üí LLM ‚Üí TTS)
- [ ] Valider qualit√© fran√ßais gabonais
- [ ] Tester g√©n√©ration PDF par commande vocale

### Semaine Prochaine

- [ ] Int√©grer dans AgentDashboard
- [ ] Int√©grer dans SuperAdminDashboard
- [ ] Tests de charge (50+ agents simultan√©s)
- [ ] Optimiser cache s√©mantique

### D√©ploiement Production

- [ ] D√©ployer backend sur AWS
- [ ] Configurer DNS api.iasted.ndjobi.ga
- [ ] Migration progressive vers prod
- [ ] Formation √©quipe admin

---

**üéâ iAsted est 100% INT√âGR√â dans le Dashboard Admin Ndjobi !**

**Pour tester imm√©diatement** :
```bash
cd /Users/okatech/ndjobi/iasted/backend && docker-compose up -d
cd /Users/okatech/ndjobi && npm run dev
open http://localhost:5173/dashboard/admin
# Cliquer sur onglet "iAsted IA" üß†
```

