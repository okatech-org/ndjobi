═══════════════════════════════════════════════════════════
    AIDE-MÉMOIRE : CRÉATION COMPTE SUPER ADMIN NDJOBI
═══════════════════════════════════════════════════════════

📌 CREDENTIALS À UTILISER :
   Email    : superadmin@ndjobi.com
   Password : ChangeMeStrong!123
   Code OTP : 999999
   Phone    : +33661002616

═══════════════════════════════════════════════════════════

🔹 ÉTAPE 1 : CRÉER L'UTILISATEUR (2 min)
───────────────────────────────────────────────────────────

1. Ouvrir : 
   https://supabase.com/dashboard/project/xfxqwlbqysiezqdpeqpv/auth/users

2. Cliquer sur "Add user" (bouton vert en haut à droite)

3. Sélectionner "Create new user"

4. Remplir :
   ┌──────────────────────────────────────┐
   │ Email    : superadmin@ndjobi.com     │
   │ Password : ChangeMeStrong!123        │
   │                                      │
   │ ☑️ Auto Confirm User (IMPORTANT !)   │
   └──────────────────────────────────────┘

5. Cliquer "Create user"

6. ✅ Vérifier que le compte apparaît dans la liste

═══════════════════════════════════════════════════════════

🔹 ÉTAPE 2 : ATTRIBUER LE RÔLE SUPER ADMIN (1 min)
───────────────────────────────────────────────────────────

1. Ouvrir le SQL Editor :
   https://supabase.com/dashboard/project/xfxqwlbqysiezqdpeqpv/sql

2. Cliquer sur "New query" (ou utiliser l'éditeur existant)

3. Copier tout le contenu du fichier :
   scripts/create-super-admin-final.sql

4. Coller dans l'éditeur SQL

5. Cliquer "RUN" (ou Ctrl+Enter / Cmd+Enter)

6. ✅ Vérifier le message de succès :
   "Compte Super Admin configuré avec succès!"

7. ✅ Vérifier les résultats de la requête SELECT
   (devrait afficher 1 ligne avec role = 'super_admin')

═══════════════════════════════════════════════════════════

🔹 ÉTAPE 3 : TESTER LA CONNEXION (30 sec)
───────────────────────────────────────────────────────────

1. Rafraîchir la page : http://localhost:5173/auth/super-admin

2. Entrer le numéro : +33661002616

3. Cliquer "Envoyer le code"

4. Entrer le code reçu par SMS (ou 485430 si démo)

5. ✅ SUCCÈS ! Vous devriez voir :
   - Pas d'erreur 400 dans la console
   - Message : "Session restaurée - user: <uuid> role: super_admin"
   - Redirection vers le dashboard Super Admin

═══════════════════════════════════════════════════════════

❌ EN CAS DE PROBLÈME
───────────────────────────────────────────────────────────

Problème 1 : L'utilisateur existe déjà
→ Solution : Supprimez-le et recréez-le, OU exécutez juste
  le script SQL (il mettra à jour le compte existant)

Problème 2 : Erreur SQL "compte non trouvé"
→ Solution : Assurez-vous d'avoir créé l'utilisateur à
  l'étape 1 AVANT d'exécuter le script SQL

Problème 3 : Erreur 400 persiste
→ Solution : 
  1. Vérifier que l'email est bien "superadmin@ndjobi.com"
  2. Vérifier que le compte est confirmé (Auto Confirm)
  3. Attendre 30 secondes et réessayer
  4. Vider le cache du navigateur (Ctrl+Shift+R)

Problème 4 : Pas de table "user_roles"
→ Solution : Exécuter les migrations Supabase :
  supabase/migrations/*.sql

═══════════════════════════════════════════════════════════

📖 GUIDES COMPLETS DISPONIBLES
───────────────────────────────────────────────────────────

• FIX-SUPER-ADMIN-AUTH.md (guide détaillé)
• RESUME-CORRECTIONS-SUPER-ADMIN.md (résumé des corrections)
• fix-super-admin-auth.sh (script interactif)

═══════════════════════════════════════════════════════════

🎉 Une fois connecté, n'oubliez pas de :
   1. Changer le mot de passe
   2. Changer le code OTP de 999999 à un code sécurisé
   3. Ne jamais partager ces credentials

═══════════════════════════════════════════════════════════

