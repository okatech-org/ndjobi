â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                           â•‘
â•‘     ğŸ¯ GUIDE COMPLET - CRÃ‰ATION COMPTE SUPER ADMIN       â•‘
â•‘                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“‹ INFORMATIONS DU COMPTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“§ Email : superadmin@ndjobi.com
ğŸ“± NumÃ©ro : +33661002616
ğŸ“§ Email contact (OTP) : iasted@me.com
ğŸ” PIN : 999999 (6 chiffres)


ğŸš€ Ã‰TAPE 1 : CRÃ‰ER LE COMPTE DANS SUPABASE AUTH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Ouvrir Supabase Auth Users :
   ğŸ‘‰ https://supabase.com/dashboard/project/xfxqwlbqysiezqdpeqpv/auth/users

2. Cliquer sur "Add user" (bouton en haut Ã  droite)

3. Remplir le formulaire :
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Email : superadmin@ndjobi.com               â”‚
   â”‚ Password : 999999                           â”‚
   â”‚ âœ… Auto Confirm User (COCHER OBLIGATOIRE)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Cliquer "Create user"

5. âœ… Le compte est crÃ©Ã© dans auth.users !


ğŸ—„ï¸ Ã‰TAPE 2 : CONFIGURER LE PROFIL ET LES RÃ”LES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Ouvrir SQL Editor :
   ğŸ‘‰ https://supabase.com/dashboard/project/xfxqwlbqysiezqdpeqpv/sql

2. Copier et coller ce script SQL :

BEGIN;

DO $$
DECLARE
    v_user_id uuid;
BEGIN
    -- RÃ©cupÃ©rer l'ID de l'utilisateur crÃ©Ã©
    SELECT id INTO v_user_id
    FROM auth.users
    WHERE email = 'superadmin@ndjobi.com';
    
    IF NOT FOUND THEN
        RAISE EXCEPTION 'âŒ Utilisateur superadmin@ndjobi.com non trouvÃ©. CrÃ©ez-le d''abord via Auth > Users.';
    END IF;
    
    -- CrÃ©er le profil
    INSERT INTO public.profiles (id, email, full_name, phone, created_at, updated_at)
    VALUES (
        v_user_id,
        'superadmin@ndjobi.com',
        'Super Administrateur',
        '+33661002616',
        NOW(),
        NOW()
    )
    ON CONFLICT (id) DO UPDATE SET
        email = EXCLUDED.email,
        full_name = EXCLUDED.full_name,
        phone = EXCLUDED.phone,
        updated_at = NOW();
    
    -- Attribuer le rÃ´le super_admin
    INSERT INTO public.user_roles (user_id, role)
    VALUES (v_user_id, 'super_admin')
    ON CONFLICT (user_id) DO UPDATE SET
        role = 'super_admin';
    
    RAISE NOTICE '';
    RAISE NOTICE 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';
    RAISE NOTICE '  âœ… COMPTE SUPER ADMIN CRÃ‰Ã‰ AVEC SUCCÃˆS !';
    RAISE NOTICE 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';
    RAISE NOTICE '';
    RAISE NOTICE 'ğŸ“§ Email : superadmin@ndjobi.com';
    RAISE NOTICE 'ğŸ“± NumÃ©ro : +33661002616';
    RAISE NOTICE 'ğŸ“§ Email contact : iasted@me.com';
    RAISE NOTICE 'ğŸ” PIN : 999999';
    RAISE NOTICE '';
    RAISE NOTICE 'ğŸ’¡ Connexion :';
    RAISE NOTICE '   1. Double-clic sur ğŸ›¡ï¸';
    RAISE NOTICE '   2. NumÃ©ro : +33661002616';
    RAISE NOTICE '   3. PIN : 999999';
    RAISE NOTICE '';
    RAISE NOTICE 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';
    
END $$;

COMMIT;

-- VÃ©rification
SELECT 
    'âœ… VÃ‰RIFICATION' as statut,
    u.id,
    u.email,
    u.email_confirmed_at,
    p.full_name,
    p.phone,
    ur.role
FROM auth.users u
LEFT JOIN public.profiles p ON p.id = u.id
LEFT JOIN public.user_roles ur ON ur.user_id = u.id
WHERE u.email = 'superadmin@ndjobi.com';

3. Cliquer "RUN"

4. VÃ©rifier les messages :
   âœ… Compte Super Admin crÃ©Ã© avec succÃ¨s !
   âœ… Profil crÃ©Ã©
   âœ… RÃ´le super_admin attribuÃ©


ğŸ”„ Ã‰TAPE 3 : REDÃ‰MARRER LE SERVEUR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Dans le terminal :
npm run dev


ğŸ§ª Ã‰TAPE 4 : TESTER LA CONNEXION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Ouvrir : http://localhost:5173/auth

2. Double-clic sur l'icÃ´ne ğŸ›¡ï¸ (Shield)

3. Remplir le formulaire :
   - NumÃ©ro : +33661002616
   - PIN : 999999

4. Cliquer "Se connecter"

5. âœ… Connexion rÃ©ussie !


ğŸ“Š CONSOLE - LOGS ATTENDUS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

AprÃ¨s connexion :
âœ… "Authentification Super Admin (compte rÃ©el Supabase)"
âœ… "Tentative de connexion Supabase: superadmin@ndjobi.com"
âœ… "Authentification Supabase rÃ©ussie"
âœ… "RÃ´le super_admin confirmÃ©"
âœ… "Session Super Admin sauvegardÃ©e dans localStorage"
âœ… "Session Super Admin crÃ©Ã©e avec succÃ¨s"

AprÃ¨s refresh (F5) :
âœ… "Restauration session Super Admin"
âœ… "SuperAdminDashboard: Session locale trouvÃ©e"


ğŸ§ª TESTS DE PERSISTANCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Actualiser la page (F5) â†’ âœ… Toujours connectÃ©
2. Actualiser 10 fois â†’ âœ… Toujours connectÃ©
3. Fermer l'onglet â†’ Rouvrir â†’ âœ… Toujours connectÃ©
4. VÃ©rifier localStorage (DevTools F12) :
   â†’ Local Storage â†’ ndjobi_super_admin_session
   â†’ Voir : { user: {...}, role: "super_admin" }


ğŸ”§ TEST DE DÃ‰CONNEXION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Cliquer sur le bouton "DÃ©connexion"
2. âœ… Redirection vers /auth
3. âœ… localStorage vidÃ©
4. F5 â†’ âœ… Reste dÃ©connectÃ©


ğŸ”´ TEST "PIN OUBLIÃ‰"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Double-clic sur ğŸ›¡ï¸
2. Cliquer "PIN oubliÃ© ?"
3. NumÃ©ro : +33661002616
4. Choisir le canal : SMS / WhatsApp / Email
5. Recevoir le code OTP
6. VÃ©rifier le code
7. CrÃ©er un nouveau PIN
8. âœ… Connexion avec le nouveau PIN


ğŸ¯ CARACTÃ‰RISTIQUES DU SYSTÃˆME
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ VRAI compte Supabase (pas demo)
âœ¨ Authentification via Supabase Auth
âœ¨ Session Supabase complÃ¨te (tokens, refresh)
âœ¨ Persistance localStorage pour UX optimale
âœ¨ Support de la rÃ©initialisation de PIN
âœ¨ Interface discrÃ¨te (double-clic ğŸ›¡ï¸)
âœ¨ MÃªme systÃ¨me que les autres utilisateurs
âœ¨ Production-ready


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ‰ Votre compte Super Admin est maintenant un VRAI compte professionnel !

â±ï¸  Temps total : ~5 minutes
ğŸ¯ DifficultÃ© : Facile

