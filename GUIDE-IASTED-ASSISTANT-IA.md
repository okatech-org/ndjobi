# 🧠 iAsted - Assistant IA Présidentiel Intelligent

## 🎯 Vue d'Ensemble

**iAsted** est votre conseiller virtuel intelligent pour la lutte anticorruption et la mise en œuvre de la Vision Gabon 2025. Il analyse les données en temps réel de la plateforme NDJOBI et vous fournit des recommandations stratégiques basées sur :

- 📊 **Données temps réel** : Signalements, KPIs, performance agents
- 🧠 **Intelligence artificielle** : Claude 3.5 Sonnet (Anthropic)
- 🇬🇦 **Contexte gabonais** : Vision 2025, structure administrative, enjeux nationaux
- 📈 **Analyses prédictives** : Patterns, tendances, zones à risque

---

## 🚀 Accès Rapide

### URL
```
http://localhost:5173/dashboard/admin?view=iasted
Rôle requis : admin (Protocole d'État)
```

### Interface
- **Chat conversationnel** : Dialogue naturel avec l'IA
- **Actions rapides** : 4 boutons analyses prédéfinies
- **Historique** : Conversation sauvegardée pendant la session
- **Scroll auto** : Vers dernier message

---

## 💬 Utilisation

### 1. Chat Conversationnel

Posez n'importe quelle question stratégique :

```
"Quelles sont mes priorités cette semaine ?"
"Analyse la performance de la région Estuaire"
"Dois-je approuver le cas CS-2025-001 ?"
"Comment améliorer le taux de résolution ?"
"Quel est l'impact sur la Vision 2025 ?"
```

**iAsted répond en** :
- Analysant vos données Supabase en temps réel
- Appliquant son intelligence contextuelle
- Formulant des recommandations actionnables

### 2. Actions Rapides (Boutons)

#### 📄 Résumé Quotidien
**Prompt** : `"Donne-moi le résumé exécutif des dernières 24h"`

**iAsted fournit** :
- Nouveaux signalements
- Décisions prises
- Cas critiques
- Faits saillants
- Recommandations immédiates

#### 📈 Patterns & Tendances
**Prompt** : `"Identifie les patterns significatifs dans les signalements récents"`

**iAsted analyse** :
- Top 5 types de corruption
- Top 5 localisations touchées
- Corrélations temporelles
- Actions préventives

#### ⚠️ Prédiction Risques
**Prompt** : `"Quelles sont les zones à risque élevé pour les 30 prochains jours ?"`

**iAsted prédit** :
- Régions vulnérables (taux résolution < 70%)
- Ministères sous performance
- Tendances alarmantes
- Mesures correctives

#### 👥 Performance Sous-Admins
**Prompt** : `"Évalue la performance des Sous-Administrateurs"`

**iAsted évalue** :
- DGSS, DGR, DGLIC, DGE
- Cas traités vs objectifs
- Délais moyens traitement
- Recommandations renforcement

---

## 🧠 Capacités d'iAsted

### Contexte Présidentiel (Temps Réel)

iAsted a accès instantané à :

#### KPIs Nationaux
- Total signalements (30 derniers jours)
- Cas critiques (priority='critique' ou score IA ≥85)
- Taux de résolution (objectif 85%)
- Impact économique (milliards FCFA récupérés)
- Score transparence nationale (/100)

#### Cas Sensibles
- Top 10 cas critiques actuels
- Détails complets (titre, type, localisation, statut)
- Scores IA de priorité

#### Performance Ministères
- Défense, Intérieur, Justice, Économie, Santé, Éducation
- Nombre signalements par secteur
- Cas critiques par ministère
- Taux résolution par secteur

#### Distribution Régionale
- 9 provinces gabonaises
- Cas par région
- Taux résolution régional
- Comparaisons inter-régionales

#### Vision Gabon 2025
- 4 piliers : Gabon Vert, Industriel, Services, Gouvernance
- Scores actuels vs objectifs
- Priorités stratégiques

### Style de Communication

iAsted s'adresse à vous avec :

✅ **Respect et pragmatisme**
```
"Excellence, basé sur les données actuelles..."
"Je recommande Excellence de..."
```

✅ **Concision et précision**
```
"En résumé : [action]"
"Basé sur : [données]"
"Impact attendu : [bénéfices]"
```

✅ **Recommandations actionnables**
```
"Actions immédiates :
1. [Action concrète]
2. [Action concrète]
3. [Action concrète]"
```

---

## 📊 Exemples Concrets

### Exemple 1 : Analyse Régionale

**Vous** : "Analyse la situation dans la région Estuaire"

**iAsted** :
```
Excellence, l'Estuaire concentre 36% des signalements nationaux (456 cas), 
avec un taux de résolution de 66% contre 71% en moyenne nationale.

Points clés :
- 78 cas critiques (priorité élevée)
- Délai moyen traitement : 14 jours
- Performance DGSS locale : satisfaisante mais améliorable

Recommandation :
Je suggère une mission d'audit ciblée auprès de la DGSS Estuaire pour 
identifier les goulots d'étranglement. Impact attendu : +8% taux résolution 
dans les 60 jours.

Actions immédiates :
1. Convoquer le Directeur DGSS Estuaire
2. Affecter 2 agents supplémentaires
3. Prioriser les 20 cas les plus anciens
```

### Exemple 2 : Décision sur Cas Sensible

**Vous** : "Dois-je approuver le cas de détournement dans le secteur pétrolier ?"

**iAsted** :
```
Excellence, après analyse du dossier :

Éléments factuels :
- Montant : 4,7 milliards FCFA
- Preuves : Documents comptables, témoignages (3), traçabilité bancaire
- Score IA : 91/100 (confiance élevée)
- Recommandation IA : Saisie judiciaire immédiate

Mon évaluation :
Le dossier est solide avec des preuves documentaires tangibles. L'impact 
économique est significatif (0,65% du PIB national). Le timing est opportun 
dans le contexte de la Vision 2025 - Souveraineté Économique.

Recommandation présidentielle :
✅ APPROUVER avec les conditions suivantes :
1. Saisie judiciaire immédiate
2. Audit externe indépendant (Big 4)
3. Protection renforcée des 3 témoins (protocole XR-7)
4. Communication publique coordonnée

Risques anticipés :
- Pression politique sectorielle
- Risque fuite médiatique
→ Mitigation : Activation XR-7 + embargo communication 72h
```

### Exemple 3 : Prédiction Tendances

**Vous** : "Prédis l'évolution des signalements pour le trimestre prochain"

**iAsted** :
```
Excellence, basé sur l'analyse des 6 derniers mois :

Tendances observées :
- Croissance moyenne : +12% par mois
- Pic saisonnier : Fin de mois (budgets/marchés publics)
- Secteurs en hausse : Économie (+23%), Santé (+18%)

Prédiction Q1 2025 (90 jours) :
- Signalements attendus : 520-580 cas
- Cas critiques : 45-55 cas
- Zones chaudes : Estuaire, Haut-Ogooué

Recommandations préparatoires :
1. Renforcer effectifs DGSS de 15% avant fin janvier
2. Former 20 agents supplémentaires sur secteur Économie
3. Prépositionner ressources Estuaire et Haut-Ogooué
4. Préparer campagne sensibilisation citoyenne

Impact Vision 2025 :
Cette croissance est POSITIVE - elle reflète la confiance citoyenne croissante 
dans le système. Pour maintenir le taux de résolution à 85%, j'estime un besoin 
de +25% capacité traitement ou optimisation processus via IA.
```

---

## 🎓 Questions Fréquentes

### "Comment iAsted accède aux données ?"

iAsted se connecte à votre base Supabase et exécute des requêtes en temps réel :
```typescript
// Exemple interne
const { data } = await supabase
  .from('signalements')
  .select('*')
  .gte('created_at', last30days);
```

Puis il envoie ces données formatées à l'API Claude avec un prompt contextuel.

### "iAsted peut-il prendre des décisions à ma place ?"

**NON**. iAsted est un **conseiller uniquement**. Il :
- ✅ Analyse et recommande
- ✅ Fournit des insights data-driven
- ✅ Anticipe les risques
- ❌ NE prend AUCUNE décision automatique
- ❌ NE modifie AUCUNE donnée

Vous gardez **100% du contrôle décisionnel**.

### "Les conversations sont-elles confidentielles ?"

- **Session** : Conversations stockées localement (useState)
- **Serveur** : Pas de persistance côté serveur
- **API Anthropic** : Pas de rétention (selon politique Anthropic)
- **Logs** : Console navigateur uniquement (dev)

Pour audit : implémenter table `iasted_conversations` si requis.

### "Puis-je personnaliser iAsted ?"

**OUI** ! Modifiez le `SYSTEM_PROMPT` dans `iAstedService.ts` :

```typescript
// Ajouter contexte spécifique
"Tu connais aussi :
- Les noms des 12 ministres actuels
- Les 52 directeurs généraux
- Les projets stratégiques en cours"

// Ajuster le ton
"Sois plus formel"
"Utilise des métaphores gabonaises"
"Intègre des proverbes locaux"
```

### "Quel est le coût d'utilisation ?"

**Estimation Président** (30-50 questions/jour) :
- Modèle : Claude 3.5 Sonnet
- Messages/mois : ~1,200
- **Coût mensuel** : $10-15 USD

**Optimisation** :
- Haiku pour résumés simples : $1-2/mois
- Sonnet pour analyses complexes : $8-12/mois

---

## 🔧 Fonctions Spécialisées

### analyzeAgentPerformance(userId)

Analyse détaillée d'un agent ou sous-admin spécifique.

```typescript
const analysis = await IAstedService.analyzeAgentPerformance('user-id');
```

**iAsted retourne** :
- Évaluation performance
- Forces et faiblesses
- Comparaison avec pairs
- Recommandations coaching

### getRecommendationOnCase(caseId)

Recommandation stratégique sur un cas sensible.

```typescript
const reco = await IAstedService.getRecommendationOnCase('case-id');
```

**iAsted retourne** :
- Analyse du dossier
- Solidité des preuves
- Recommandation : Approuver / Rejeter / Enquête
- Actions concrètes
- Risques anticipés

### identifyPatterns()

Identification patterns et corrélations dans signalements.

```typescript
const patterns = await IAstedService.identifyPatterns();
```

**iAsted retourne** :
- Top 5 types corruption
- Top 5 localisations
- Patterns temporels
- Actions préventives

### predictRisks()

Prédiction zones à risque 30 prochains jours.

```typescript
const risks = await IAstedService.predictRisks();
```

**iAsted retourne** :
- Régions vulnérables
- Ministères sous-performants
- Tendances alarmantes
- Mesures correctives

### getSummary(type)

Résumé exécutif quotidien/hebdo/mensuel.

```typescript
const summary = await IAstedService.getSummary('daily');
```

**Types** : `'daily'` | `'weekly'` | `'monthly'`

**iAsted retourne** :
- Nouveaux signalements période
- Décisions présidentielles prises
- Cas critiques
- Faits saillants
- Recommandations

---

## 🎨 Interface Utilisateur

### Layout

```
┌─────────────────────────────────┐
│ 🧠 iAsted [IA Présidentielle]  │← Header
│ Assistant Intelligent - Vision  │
│ Gabon 2025              [Reset] │
├─────────────────────────────────┤
│ Actions rapides:                │← Boutons Quick
│ [Résumé] [Patterns] [Risques]   │  Actions
│ [Performance Sous-Admins]        │
├─────────────────────────────────┤
│                                 │
│ [iAsted] Excellence, je suis... │← Messages
│                                 │  Conversation
│      [Vous] Bonjour iAsted      │
│                                 │
│ [iAsted] Excellence, comment... │
│                                 │
├─────────────────────────────────┤
│ [Input question...] [Send btn]  │← Input Zone
│ iAsted analyse données temps... │
└─────────────────────────────────┘
```

### Couleurs et Styles

- **Messages Utilisateur** : Fond primary (bleu), alignés droite
- **Messages iAsted** : Fond muted (gris), alignés gauche
- **Loading** : Spinner + texte "iAsted analyse..."
- **Badge** : "IA Présidentielle" avec icône Sparkles

---

## 📚 Exemples Questions par Catégorie

### Questions Stratégiques

```
"Quelle est ma stratégie optimale pour atteindre 85% de résolution ?"
"Comment prioriser mes actions cette semaine ?"
"Quel pilier Vision 2025 nécessite le plus d'attention ?"
"Analyse l'impact de nos actions sur le score transparence"
"Recommande-moi une stratégie régionale pour 2025"
```

### Questions Opérationnelles

```
"Liste les 5 cas critiques les plus urgents"
"Quels agents DGSS sont les plus performants ?"
"Compare la performance DGR vs DGLIC"
"Identifie les goulots d'étranglement dans le traitement"
"Quels ministères ont besoin de renfort immédiat ?"
```

### Questions Décisionnelles

```
"Dois-je réaffecter 30% des dossiers DGE vers DGLIC ?"
"Vaut-il mieux recruter ou former les agents existants ?"
"Quelle région devrait recevoir la prochaine mission d'audit ?"
"Recommande l'allocation budgétaire anticorruption Q1 2025"
"Dois-je activer le protocole XR-7 pour ce cas ?"
```

### Questions Analytiques

```
"Corrélation entre montant détourné et temps de résolution ?"
"Pattern : corruption plus élevée certains mois ?"
"Impact des décisions présidentielles sur la confiance citoyenne ?"
"ROI des investissements anticorruption (coût vs fonds récupérés) ?"
"Prédis le score transparence dans 6 mois si tendance actuelle"
```

---

## 🔬 Architecture Technique

### Service iAstedService

**Fichier** : `src/services/iAstedService.ts`

**Méthodes principales** :
- `sendMessage(message, history)` : Envoyer question
- `getPresidentialContext()` : Récupérer contexte temps réel
- `analyzeAgentPerformance(userId)` : Analyse agent
- `getRecommendationOnCase(caseId)` : Recommandation cas
- `identifyPatterns()` : Détection patterns
- `predictRisks()` : Prédiction risques
- `getSummary(type)` : Résumés exécutifs

**API** : Anthropic Claude API
- Endpoint : `https://api.anthropic.com/v1/messages`
- Modèle : `claude-3-5-sonnet-20241022`
- Max tokens : 2000
- Temperature : 0.7

### Composant IAstedChat

**Fichier** : `src/components/admin/IAstedChat.tsx`

**État** :
- `messages[]` : Historique conversation
- `input` : Message en cours
- `isLoading` : État chargement

**Hooks** :
- `useToast()` : Notifications
- `useRef()` : Scroll auto
- `useEffect()` : Scroll vers bas

**UI** :
- Card 700px height
- ScrollArea messages
- Input + bouton Send
- 4 boutons actions rapides
- Bouton reset conversation

---

## 🔐 Sécurité et Confidentialité

### Données Envoyées à l'API

1. **Prompt système** : Identité et rôle iAsted (fixe)
2. **Contexte présidentiel** : KPIs, cas sensibles, performance (temps réel)
3. **Question utilisateur** : Votre message
4. **Historique** : Messages précédents conversation

### Données NON Envoyées

- ❌ Informations personnelles identifiantes (sauf email agents pour contexte)
- ❌ Documents/fichiers uploadés
- ❌ Détails confidentiels défense nationale
- ❌ Coordonnées bancaires/financières sensibles

### Bonnes Pratiques

1. **Clés API sécurisées**
   - Stocker dans `.env.local` (jamais commit)
   - Rotation tous les 3 mois
   - Limites quotas configurées

2. **Audit Trail**
   - Logger toutes interactions (optionnel)
   - Table `iasted_conversations` si besoin traçabilité

3. **Permissions**
   - Accès réservé rôle `admin` uniquement
   - Vérification côté client + RLS serveur

---

## 🚀 Roadmap Fonctionnalités

### Phase 2 (À venir)
- [ ] **Analyse documents PDF** : Upload + OCR + analyse
- [ ] **Génération rapports vocaux** : Résumés audio
- [ ] **Suggestions proactives** : iAsted propose sans demande
- [ ] **Intégration calendrier** : Planification actions

### Phase 3 (Avancé)
- [ ] **Multi-agents** : iAsted + iAstedEconomique + iAstedJuridique
- [ ] **Apprentissage continu** : Fine-tuning sur vos décisions
- [ ] **Vision par ordinateur** : Analyse photos/vidéos preuves
- [ ] **Simulation scénarios** : "Et si j'approuve ce cas ?"

---

## 📞 Support

### Problème : iAsted ne répond pas

```bash
# 1. Vérifier clé API
console.log(import.meta.env.VITE_ANTHROPIC_API_KEY);

# 2. Tester API directement
curl https://api.anthropic.com/v1/messages \
  -H "x-api-key: $VITE_ANTHROPIC_API_KEY" \
  -H "anthropic-version: 2023-06-01" \
  -H "content-type: application/json" \
  -d '{"model":"claude-3-5-sonnet-20241022","max_tokens":100,"messages":[{"role":"user","content":"Test"}]}'

# 3. Vérifier console navigateur (F12)
```

### Problème : Réponses incohérentes

```
→ Vérifier données Supabase (signalements, presidential_decisions)
→ Tester requêtes SQL manuellement
→ Vérifier tables existent et contiennent données
```

### Problème : Erreur "Context too long"

```
→ Réduire VITE_AI_MAX_TOKENS
→ Limiter nombre cas sensibles (actuellement top 10)
→ Raccourcir historique conversation
```

---

## ✅ Checklist Mise en Service

- [ ] Clé Anthropic API obtenue (console.anthropic.com)
- [ ] Fichier `.env.local` créé avec VITE_ANTHROPIC_API_KEY
- [ ] Serveur redémarré (bun run dev)
- [ ] Accès `/dashboard/admin?view=iasted` fonctionnel
- [ ] Interface chatbot affichée
- [ ] Message bienvenue "Excellence, je suis iAsted..."
- [ ] 4 boutons actions rapides visibles
- [ ] Test envoi message : réponse reçue
- [ ] Test action rapide "Résumé Quotidien" : analyse générée
- [ ] Aucune erreur console navigateur
- [ ] Scroll automatique vers dernier message
- [ ] Bouton reset conversation fonctionnel

---

## 🎉 Conclusion

**iAsted** est maintenant opérationnel et prêt à vous assister dans la prise de décisions stratégiques pour la lutte anticorruption et la Vision Gabon 2025.

**Capacités** :
- 🧠 Analyse données temps réel
- 📊 Recommandations stratégiques
- 🎯 Prédictions tendances
- ⚠️ Identification risques
- 👥 Évaluation performance
- 📈 Insights Vision 2025

**Accès** : `/dashboard/admin?view=iasted`  
**Rôle** : admin (Protocole d'État)  
**Status** : ✅ Production Ready

---

**iAsted au service de la Présidence de la République Gabonaise** 🇬🇦

